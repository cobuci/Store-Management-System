$(document).ready(function(){let t=1,o=$("#amount"),e=$("#product");$("#adicionar").click(function(a){a.preventDefault();let l=$("#product option:selected").attr("sale"),n=$("#amount").val();if(o.val()&&e.val()){let r=t-1;$("#product"+t).html($("#product"+r).html()).find("ul li:first-child"),jQuery("<li>",{id:"product"+t,class:"listaVenda item",text:$("#amount").val()+" - "+$("#product option:selected").attr("nome")+" - "+$("#product option:selected").attr("brand")+" - "+$("#product option:selected").attr("weight"),sale:parseFloat(l)*parseFloat(n)}).appendTo("#lista"),jQuery("<input>",{id:"product_id"+t,name:"product"+t,value:$("#product option:selected").val()}).attr("type","hidden").appendTo("#lista"),jQuery("<input>",{id:"item_amount"+t,name:"amount"+t,value:n}).attr("type","hidden").appendTo("#lista"),t++}$("#amount").val("")}),$("#remover").click(function(a){a.preventDefault(),t>1&&($("#product"+(t-1)).remove(),$("#product_id"+(t-1)).remove(),t--)})});const u=()=>{const t=document.getElementById("total_price"),o=document.getElementById("item_amount");let e=0;Array.from(document.getElementsByClassName("item")).forEach(function(a){e=parseFloat(e)+parseFloat(a.getAttribute("sale"))}),t.value=e.toFixed(2),o.value=$(".ulProduto li").length},c=document.querySelector("#lista"),d=document.getElementById("discount"),i=new MutationObserver(function(){u()});i.observe(c,{childList:!0});$(d).keypress(function(){s()});const s=()=>{let t=document.getElementById("discount").value;const o=document.getElementById("total_price"),e=parseFloat(o.value)-t;o.value=e.toFixed(2)};$(document).ready(function(){$("#categoria").change(function(){const t=$("#personForm").attr("data-url");let o=$(this).val();$.ajax({url:t,data:{categoria:o},success:function(e){$("#product").html(e)}})})});
